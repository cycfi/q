<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>API - Q Audio DSP Library :: Q Docs</title>
    <link rel="canonical" href="https://www.cycfi.com/q/1/api.html">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../_/css/site.css">
<meta name="og:title" content="Q Docs Q DSP Library Documentation"/>
<link rel="icon" type="image/png" sizes="16x16" href="https://cycfi.com/assets/icons/favicon-16x16.png"/>
<link rel="icon" type="image/png" sizes="32x32" href="https://cycfi.com/assets/icons/favicon-32x32.png"/>
<link rel="icon" type="image/png" sizes="96x96" href="https://cycfi.com/assets/icons/favicon-96x96.png"/>
<link rel="icon" type="image/png" sizes="192x192" href="https://cycfi.com/assets/icons/android-chrome-192x192.png"/>
<link rel="icon" type="image/png" sizes="256x256" href="https://cycfi.com/assets/icons/android-chrome-256x256.png"/>
<link rel="apple-touch-icon" type="image/png" href="https://cycfi.com/assets/icons/apple-touch-icon.png"/>

    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <!--  Cycfi Logo -->
      <a class="m-nav__logo" href="https://www.cycfi.com">
        <svg version="1.1" x="0px" y="0px" width="200" viewBox="0 0 600 100" style="padding-top: 15;" xmlns="http://www.w3.org/2000/svg">
          <g transform="matrix(2.55, 0, 0, 2.62, -464.010406, -1042.918213)" fill="#202020">
            <path d="M234.37,431.65c-0.03,0.76-0.65,1.37-1.42,1.37h-37.03c-2.34,0-4.38-0.12-6.06-0.36 c-1.78-0.25-3.29-0.7-4.47-1.32c-1.28-0.68-2.24-1.61-2.84-2.76c-0.58-1.11-0.85-2.48-0.79-4.07l0.27-7.53 c0.06-1.59,0.42-2.96,1.08-4.07c0.68-1.15,1.7-2.08,3.04-2.76c1.22-0.62,2.76-1.07,4.56-1.32c1.7-0.24,3.75-0.36,6.08-0.36h36.93 c0.8,0,1.45,0.67,1.42,1.47l-0.15,4.19c-0.03,0.76-0.65,1.37-1.42,1.37h-33.96c-1.91,0-3.5-0.04-4.6,0.08 c-1.24,0.13-1.53,0.28-1.83,0.45c-0.47,0.26-0.59,0.66-0.76,1.35c-0.14,0.84-0.18,1.03-0.19,1.43l-0.14,3.91 c-0.01,0.39,0.04,0.84,0.09,1.43c0.02,0.02,0.01,0.72,0.61,1.18c0.7,0.54,1.08,0.41,1.91,0.5c1.1,0.12,2.62,0.18,4.53,0.18h33.85 c0.8,0,1.45,0.67,1.42,1.47L234.37,431.65z"/>
            <path d="M276.06,433.02H257.9c-0.8,0-1.45-0.67-1.42-1.47l0.15-4.18c0.03-0.76,0.65-1.37,1.42-1.37h14.16 c1.91,0,3.52,0,4.61-0.12c1.23-0.13,1.75-0.25,2.17-0.71c0.36-0.39,0.4-2.52,0.4-2.52h-27.92c-11.11,0-13.26-5.13-13.1-9.44 l0.12-3.38c0.03-0.76,0.65-1.37,1.42-1.37h8.43c0.8,0,1.45,0.67,1.42,1.47l-0.05,1.36c-0.02,0.46-0.01,2.03,0.11,2.51 c0.1,0.42,0.44,0.82,0.78,1.07c0.47,0.35,0.83,0.42,1.64,0.54c0.9,0.14,2.09,0.21,3.54,0.21h24.09l0.21-5.8 c0.03-0.76,0.65-1.37,1.42-1.37h8.46c0.8,0,1.45,0.67,1.42,1.47l-0.49,13.57c-0.06,1.58-0.46,3.96-1.12,5.07 c-0.68,1.15-1.71,2.08-3.04,2.76c-1.23,0.63-2.76,1.07-4.56,1.32C280.44,432.9,278.4,433.02,276.06,433.02L276.06,433.02z"/>
            <path d="M401.95,431.55l0.78-21.72c0.03-0.76,0.65-1.37,1.42-1.37h8.59c0.8,0,1.45,0.67,1.42,1.47l-0.78,21.72 c-0.03,0.76-0.65,1.37-1.42,1.37h-8.59C402.56,433.02,401.92,432.35,401.95,431.55z"/>
            <path d="M346.77,431.65c-0.03,0.76-0.65,1.37-1.42,1.37h-37.03c-2.34,0-4.38-0.12-6.06-0.36 c-1.78-0.25-3.29-0.7-4.47-1.32c-1.28-0.68-2.24-1.61-2.84-2.76c-0.58-1.11-0.85-2.48-0.79-4.07l0.27-7.53 c0.06-1.59,0.42-2.96,1.08-4.07c0.68-1.15,1.71-2.08,3.04-2.76c1.22-0.62,2.76-1.07,4.56-1.32c1.7-0.24,3.75-0.36,6.08-0.36h36.93 c0.8,0,1.45,0.67,1.42,1.47l-0.15,4.19c-0.03,0.76-0.65,1.37-1.42,1.37h-33.96c-1.91,0-2.47-0.04-3.58,0.08 c-1.24,0.13-1.53,0.28-1.83,0.45c-0.47,0.26-0.58,0.66-0.76,1.35c-0.14,0.84-0.22,2.03-0.23,2.43l-0.07,1.91 c-0.01,0.39,0.01,1.84,0.06,2.43c0.02,0.02,0.01,0.72,0.61,1.18c0.7,0.54,1.08,0.41,1.91,0.5c1.1,0.12,2.62,0.18,4.53,0.18h32.83 c0.8,0,1.45,0.67,1.42,1.47L346.77,431.65z"/>
            <path d="M386.2,425.88l-24.93-0.03l-0.21,5.8c-0.03,0.76-0.65,1.37-1.42,1.37h-8.46c-0.8,0-1.45-0.67-1.42-1.47 l0.49-13.57c0.06-1.58,0.46-3.96,1.12-5.07c0.68-1.15,1.71-2.08,3.04-2.76c1.23-0.63,2.76-1.07,4.56-1.32 c1.7-0.24,3.75-0.36,6.08-0.36l0,0h33.68c0.8,0,1.45,0.67,1.42,1.47l-0.15,4.18c-0.03,0.76-0.65,1.37-1.42,1.37H368.9 c-1.91,0-3.52,0-4.61,0.12c-1.23,0.13-1.75,0.25-2.17,0.71c-0.36,0.39-0.4,2.52-0.4,2.52h24.63c0.8,0,1.45,0.67,1.42,1.47 l-0.15,4.22C387.59,425.28,386.96,425.88,386.2,425.88z"/>
          </g>
        </svg>
      </a>
      <a class="navbar-item" href="https://www.cycfi.com">Q Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="q" data-version="1">
  <aside class="nav">
    <div class="panels">
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Q Audio DSP Library</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="setup.html">Setup and Installation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="quick_start.html">Quick Start</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="fundamentals.html">Fundamentals</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="units.html">Units</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Q Audio DSP Library</span>
    <span class="version">1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="index.html">Q Audio DSP Library</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Q Audio DSP Library</a></li>
    <li><a href="api.html">API - Q Audio DSP Library</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">API - Q Audio DSP Library</h1>
<div class="sect1">
<h2 id="_file_structure"><a class="anchor" href="#_file_structure"></a>File Structure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The library is organized with this simplified directory structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">|_ docs:       Where this documentation resides.
|_ example:    Self-contained and easy to understand c++ programs that
               demonstrate various features of the library.
|_ q_io:
  |_ external: 3rd party libraries used by the `q_io` module.
  |_ include:  q_io header files.
  |_ src:      q_io source files.
|
|_ q_lib:
  |_ include:  Header-only core q_lib DSP library.
|_ test:       Contains a comprehensive set of c++ files for testing the library.</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_namespace"><a class="anchor" href="#_namespace"></a>Namespace</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All entities in the Q library are placed in namespace <code>cycfi::q</code>. Everywhere
in this documentation, we will be using a namespace alias to make the code
less verbose:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">namespace q = cycfi::q;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_functors"><a class="anchor" href="#_functors"></a>Functors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the world of electronic music, there are <em>processors</em> and <em>synthesizers</em>,
the definitions of which are somewhat overlapping and differ only on one
specific point: that processors take in one or more input value(s) and
produces one or more output value(s), whereas a synthesizer does not take in
any inputs at all.</p>
</div>
<div class="paragraph">
<p>In the Q world, both <em>processors</em> and <em>synthesizers</em> are just <em>functors</em> —C
function objects, which are basic building blocks that can be composed to
form more complex functions. A functor can have zero or more input values and
produces one or more output values (typically just one, but in certain cases,
two or more output values may be returned in the form of C tuples).</p>
</div>
<div class="paragraph">
<p>Syntactically, you use these just like any other function. So, for instance,
for a single input functor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">float r = f(s);</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>s</code> is the input value, and <code>f(s)</code> returns a result and stores it in
the variable <code>r</code>. Typical audio processor <em>functors</em> in the Q DSP library
work on 32-bit <code>float</code> input samples with the normal -1.0 to 1.0 range.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_values"><a class="anchor" href="#_values"></a>Values</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Values are not restricted to sampled signals, however. For an example, signal
envelopes are best represented in the decibel domain, and so dynamic-range
processors such as compressors and expanders take <code>decibel</code> as inputs and
return <code>decibel</code> results. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">decibel gain = comp(env);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another example, oscillators work on phase-angle inputs and return output
samples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">float out = sin(phase++);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Q DSP library has a rich set of such types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>float</code>: Typical sample data type -1.0 to 1.0 (or beyond for some
computational headroom).</p>
</li>
<li>
<p><code>frequency</code>: Cycles per second (Hz).</p>
</li>
<li>
<p><code>duration</code> : A time span (seconds, milliseconds, etc.)</p>
</li>
<li>
<p><code>period</code> : The inverse of frequency</p>
</li>
<li>
<p><code>phase</code>: Fixed point 1.31 format where 31 bits are fractional. <code>phase</code>
represents 0 to 2π phase values suitable for oscillators.</p>
</li>
<li>
<p><code>decibel</code>: Ratio of one value to another on a logarithmic scale (dB)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Q DSP library is typeful and typesafe. You can not mismatch values of
different types such as <code>frequency</code> and <code>decibel</code>, for example. Such
potentially disastrous mistakes can happen if all values are just raw
floating point types.</p>
</div>
<div class="paragraph">
<p>Values do not have implicit conversion to raw types, however, except for
<code>decibel</code>, which is special because it operates on the logarithmic domain,
comparison and arithmetic with raw types are possible. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">auto harmonic = 440_Hz * 4; // 440_Hz is a frequency literal (see below)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_values_api"><a class="anchor" href="#_values_api"></a>Values API</h2>
<div class="sectionbody">

</div>
</div>
<div class="sect1">
<h2 id="_literals"><a class="anchor" href="#_literals"></a>Literals</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To augment the wealth of value types, the Q DSP library makes abundant use of
<a href="https://en.cppreference.com/w/cpp/language/user_literal">C++ user-defined
literals</a>. Here are some examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">auto c4 = 261.6256_Hz;
auto threshold = -36_dB;
auto coef = 1.0 - (2_pi * 1_kHz / sps);
auto attack = 20_ms;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use these literals, include the <code>literals.hpp</code> header:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">#include &lt;q/support/literals.hpp&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>then use the <code>literals</code> namespace somewhere in a scope where you need it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">using namespace q::literals;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here&#8217;s the list of available literals:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// frequency
constexpr frequency operator ""  _Hz(long double val);
constexpr frequency operator ""  _Hz(unsigned long long int val);
constexpr frequency operator ""  _KHz(long double val);
constexpr frequency operator ""  _KHz(unsigned long long int val);
constexpr frequency operator ""  _kHz(long double val);
constexpr frequency operator ""  _kHz(unsigned long long int val);
constexpr frequency operator ""  _MHz(long double val);
constexpr frequency operator ""  _MHz(unsigned long long int val);

// duration
constexpr duration operator ""   _s(long double val);
constexpr duration operator ""   _s(unsigned long long int val);
constexpr duration operator ""   _ms(long double val);
constexpr duration operator ""   _ms(unsigned long long int val);
constexpr duration operator ""   _us(long double val);
constexpr duration operator ""   _us(unsigned long long int val);

// decibel
constexpr decibel operator ""    _dB(unsigned long long int val);
constexpr decibel operator ""    _dB(long double val);

// pi
constexpr long double operator "" _pi(long double val);
constexpr long double operator "" _pi(unsigned long long int val)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notes"><a class="anchor" href="#_notes"></a>Notes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There is also a complete set of tables for notes from A[0] (27.5Hz) to Ab[9]
(13289.75Hz). For example, to get the frequencies for each of the open
strings in a 6-string guitar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">// 6 string guitar frequencies:
constexpr auto low_e   = E[2];
constexpr auto a       = A[2];
constexpr auto d       = D[3];
constexpr auto g       = G[3];
constexpr auto b       = B[3];
constexpr auto high_e  = E[4];</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use these literals, include the <code>notes.hpp</code> header:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">#include &lt;q/support/notes.hpp&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>then use the <code>notes</code> namespace somewhere in a scope where you need it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-c++ hljs" data-lang="c++">using namespace q::note_names;</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p><em>Copyright (c) 2014-2023 Joel de Guzman. All rights reserved.</em>
<em>Distributed under the <a href="https://opensource.org/licenses/MIT">MIT License</a></em></p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
